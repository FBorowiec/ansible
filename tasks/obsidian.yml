---
- name: Install obsidian
  ansible.builtin.apt:
    deb: https://github.com/obsidianmd/obsidian-releases/releases/download/v1.0.3/obsidian_1.0.3_amd64.deb
  when: obsidian_package_check is failed and ansible_facts['os_family'] == "Debian"
  tags:
    - obsidian

- name: "Check if obsidian vault exists"
  ansible.builtin.stat:
    path: "{{ main_user_dir }}/zettelkasten"
  register: obsidian_vault
  tags:
    - obsidian

- name: Clone obsidian vault repo
  ansible.builtin.git:
    repo: "git@github.com:fborowiec/zettelkasten.git "
    dest: "{{ main_user_dir }}/zettelkasten"
    version: main
  when: not obsidian_vault.stat.exists
  tags:
    - obsidian
